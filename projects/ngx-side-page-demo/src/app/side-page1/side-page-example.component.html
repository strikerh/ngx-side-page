<div class="side-page-content">
  <header class="side-page-header">
    <h2>{{ data.title }}</h2>
    <p class="description">{{ data.description }}</p>
  </header>
  {{ data | json }}
  <div class="side-page-body">
    <!-- Basic Demo -->
    <div *ngIf="data.type === 'basic'" class="demo-section">
      <p>This is a basic example of the ngx-side-page component. It demonstrates how to open a side page with minimal configuration.</p>
      <div class="code-example">
        <pre><code>const ref = sidePageService.openSidePage(
  'demo',
  YourComponent,
  &#123;
    width: '400px',
    maxWidth: '95%',
    data: &#123;
      title: 'Basic Demo',
      description: 'This is a basic example'
    &#125;
  &#125;
);</code></pre>
      </div>
      <button class="btn close-btn" (click)="closeWithResult('basic demo closed')">Close Side Page</button>
    </div>

    <!-- Position Demo -->
    <div *ngIf="data.type === 'position'" class="demo-section">
      <p>This example shows how to position the side page on the left side of the screen using the <code>position: 'start'</code> option.</p>
      <div class="code-example">
        <pre><code>const ref = sidePageService.openSidePage(
  'position-demo',
  YourComponent,
  &#123;
    position: 'start', // Left side positioning
    width: '400px',
    maxWidth: '95%'
  &#125;
);</code></pre>
      </div>
      <button class="btn close-btn" (click)="closeWithResult('position demo closed')">Close Side Page</button>
    </div>

    <!-- Width Demo -->
    <div *ngIf="data.type === 'width'" class="demo-section">
      <p>This example demonstrates how to customize the width of the side page. Notice how this panel is wider than the basic example.</p>
      <div class="code-example">
        <pre><code>const ref = sidePageService.openSidePage(
  'width-demo',
  YourComponent,
  &#123;
    width: '600px', // Wider panel
    maxWidth: '95%'
  &#125;
);</code></pre>
      </div>
      <button class="btn close-btn" (click)="closeWithResult('width demo closed')">Close Side Page</button>
    </div>

    <!-- Data Passing Demo -->
    <div *ngIf="data.type === 'data'" class="demo-section">
      <p>This example shows how to pass complex data to the side page component and access it using the <code>SIDE_PAGE_DATA</code> injection token.</p>

      <div class="data-display">
        <h3>Passed Data:</h3>
        <div class="data-section">
          <h4>Items:</h4>
          <ul>
            <li *ngFor="let item of data.complexData.items">
              {{ item.name }} - {{ item.value }}
            </li>
          </ul>
        </div>
        <div class="data-section">
          <h4>User:</h4>
          <p><strong>Name:</strong> {{ data.complexData.user.name }}</p>
          <p><strong>Email:</strong> {{ data.complexData.user.email }}</p>
        </div>
      </div>

      <div class="code-example">
        <pre><code>// In your component
const complexData = &#123;
  items: [
    &#123; id: 1, name: 'Item 1', value: 100 &#125;,
    &#123; id: 2, name: 'Item 2', value: 200 &#125;,
    &#123; id: 3, name: 'Item 3', value: 300 &#125;
  ],
  user: &#123;
    id: 123,
    name: 'John Doe',
    email: 'john&#64;example.com'
  &#125;
&#125;;

const ref = sidePageService.openSidePage(
  'data-demo',
  YourComponent,
  &#123;
    data: &#123;
      complexData: complexData
    &#125;
  &#125;
);

// In the side page component
public data = inject(SIDE_PAGE_DATA);</code></pre>
      </div>
      <button class="btn close-btn" (click)="closeWithResult('data demo closed')">Close Side Page</button>
    </div>

    <!-- Events Demo -->
    <div *ngIf="data.type === 'events'" class="demo-section">
      <p>This example demonstrates how to subscribe to events from the side page. Try closing this panel to see the afterClosed event in action.</p>

      <div class="code-example">
        <pre><code>const ref = sidePageService.openSidePage(
  'events-demo',
  YourComponent
);

// Subscribe to events
ref.afterOpened().subscribe(() => &#123;
  console.log('Side page opened');
&#125;);

ref.afterClosed().subscribe(result => &#123;
  console.log('Side page closed with result:', result);
&#125;);</code></pre>
      </div>
      <p>Close this panel with a custom result:</p>
      <div class="button-group">
        <button class="btn" (click)="closeWithResult({ status: 'success', message: 'Operation completed' })">
          Close with Success
        </button>
        <button class="btn" (click)="closeWithResult({ status: 'cancelled', message: 'User cancelled' })">
          Close with Cancel
        </button>
      </div>
    </div>

    <!-- Form Example -->
    <div *ngIf="data.type === 'form'" class="demo-section">
      <p>This example shows how to use forms in a side page. The form data will be returned when the form is submitted.</p>

      <form [formGroup]="contactForm" (ngSubmit)="submitForm()" class="contact-form">
        <div class="form-group">
          <label for="name">Name</label>
          <input
            type="text"
            id="name"
            formControlName="name"
            class="form-control"
            [ngClass]="{'invalid': isInvalid('name')}"
          />
          <div *ngIf="isInvalid('name')" class="error-message">
            Name is required and must be at least 3 characters
          </div>
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            class="form-control"
            [ngClass]="{'invalid': isInvalid('email')}"
          />
          <div *ngIf="isInvalid('email')" class="error-message">
            A valid email is required
          </div>
        </div>

        <div class="form-group">
          <label for="message">Message</label>
          <textarea
            id="message"
            formControlName="message"
            class="form-control"
            rows="4"
            [ngClass]="{'invalid': isInvalid('message')}"
          ></textarea>
          <div *ngIf="isInvalid('message')" class="error-message">
            Message is required
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn submit-btn">Submit</button>
          <button type="button" class="btn cancel-btn" (click)="closeWithResult('form cancelled')">Cancel</button>
        </div>
      </form>
    </div>

    <!-- Details Example -->
    <div *ngIf="data.type === 'details'" class="demo-section">
      <div class="product-details">
        <div class="product-image">
          <img [src]="data.product.image" alt="Product image" />
        </div>

        <div class="product-info">
          <h3>{{ data.product.name }}</h3>
          <p class="product-price">${{ data.product.price.toFixed(2) }}</p>
          <p class="product-description">{{ data.product.description }}</p>

          <h4>Features</h4>
          <ul class="product-features">
            <li *ngFor="let feature of data.product.features">{{ feature }}</li>
          </ul>

          <div class="product-actions">
            <button class="btn buy-btn">Add to Cart</button>
            <button class="btn close-btn" (click)="closeWithResult('details closed')">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Wizard Example -->
    <div *ngIf="data.type === 'wizard'" class="demo-section wizard">
      <div class="wizard-progress">
        <div class="progress-steps">
          <div
            *ngFor="let step of data.steps; let i = index"
            class="step"
            [ngClass]="{'active': i === currentStep, 'completed': i < currentStep}"
          >
            <div class="step-number">{{ i + 1 }}</div>
            <div class="step-title">{{ step.title }}</div>
          </div>
        </div>
        <div class="progress-bar">
          <div class="progress" [style.width.%]="(currentStep / (data.steps.length - 1)) * 100"></div>
        </div>
      </div>

      <div class="wizard-content">
        <!-- Step 1 -->
        <div *ngIf="currentStep === 0" class="wizard-step">
          <h3>Choose a Package</h3>
          <div class="package-options">
            <div class="package-option">
              <h4>Basic</h4>
              <p class="price">$9.99/month</p>
              <ul>
                <li>5 GB Storage</li>
                <li>10 Users</li>
                <li>Basic Support</li>
              </ul>
              <button class="btn select-btn">Select</button>
            </div>

            <div class="package-option recommended">
              <div class="badge">Recommended</div>
              <h4>Pro</h4>
              <p class="price">$19.99/month</p>
              <ul>
                <li>20 GB Storage</li>
                <li>50 Users</li>
                <li>Priority Support</li>
                <li>Advanced Features</li>
              </ul>
              <button class="btn select-btn">Select</button>
            </div>

            <div class="package-option">
              <h4>Enterprise</h4>
              <p class="price">$49.99/month</p>
              <ul>
                <li>Unlimited Storage</li>
                <li>Unlimited Users</li>
                <li>24/7 Support</li>
                <li>Premium Features</li>
                <li>Custom Integration</li>
              </ul>
              <button class="btn select-btn">Select</button>
            </div>
          </div>
        </div>

        <!-- Step 2 -->
        <div *ngIf="currentStep === 1" class="wizard-step">
          <h3>Enter Your Details</h3>
          <div class="form-group">
            <label>Full Name</label>
            <input type="text" class="form-control" />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" class="form-control" />
          </div>
          <div class="form-group">
            <label>Company</label>
            <input type="text" class="form-control" />
          </div>
          <div class="form-group">
            <label>Phone</label>
            <input type="tel" class="form-control" />
          </div>
        </div>

        <!-- Step 3 -->
        <div *ngIf="currentStep === 2" class="wizard-step">
          <h3>Payment Information</h3>
          <div class="form-group">
            <label>Card Number</label>
            <input type="text" class="form-control" placeholder="1234 5678 9012 3456" />
          </div>
          <div class="form-row">
            <div class="form-group half">
              <label>Expiry Date</label>
              <input type="text" class="form-control" placeholder="MM/YY" />
            </div>
            <div class="form-group half">
              <label>CVC</label>
              <input type="text" class="form-control" placeholder="123" />
            </div>
          </div>
          <div class="form-group">
            <label>Billing Address</label>
            <textarea class="form-control" rows="3"></textarea>
          </div>
        </div>

        <!-- Step 4 -->
        <div *ngIf="currentStep === 3" class="wizard-step">
          <h3>Confirmation</h3>
          <div class="confirmation">
            <div class="confirmation-icon">âœ“</div>
            <h4>Thank You!</h4>
            <p>Your order has been received and is being processed.</p>
            <p>You will receive a confirmation email shortly.</p>
            <p>Order Reference: <strong>#ORD-2025-12345</strong></p>
          </div>
        </div>
      </div>

      <div class="wizard-actions">
        <button
          *ngIf="currentStep > 0"
          class="btn back-btn"
          (click)="prevStep()"
        >
          Back
        </button>
        <button
          *ngIf="currentStep < data.steps.length - 1"
          class="btn next-btn"
          (click)="nextStep()"
        >
          Next
        </button>
        <button
          *ngIf="currentStep === data.steps.length - 1"
          class="btn finish-btn"
          (click)="closeWithResult('wizard completed')"
        >
          Finish
        </button>
      </div>
    </div>

    <!-- RTL Demo -->
    <div *ngIf="data.type === 'rtl'" class="demo-section rtl-demo">
      <div class="rtl-notice">
        <h3>ğŸŒ RTL Support Demonstration</h3>
        <p>The side page library automatically adapts to RTL (Right-to-Left) layouts. Use the floating toggle button to switch between LTR and RTL modes and see how all demos adapt automatically.</p>
      </div>

      <div class="rtl-features">
        <h4>RTL Features:</h4>
        <ul>
          <li>âœ… Automatic animation direction detection</li>
          <li>âœ… Side page slides from the correct side based on layout direction</li>
          <li>âœ… Text alignment adapts to RTL</li>
          <li>âœ… No additional configuration needed</li>
        </ul>

        <div class="global-toggle-info">
          <h4>ğŸ”„ Try the Global Toggle:</h4>
          <p>Use the floating toggle button in the bottom-right corner to switch between LTR and RTL modes. All side page demos will automatically adapt!</p>
        </div>
      </div>

      <div class="code-example">
        <h4>How it works:</h4>
        <pre><code>// The library automatically detects RTL direction
const direction = getComputedStyle(document.documentElement).direction;

// And adjusts animations accordingly
// In RTL: 'end' position becomes left side
// In LTR: 'end' position becomes right side

// Your code remains the same:
const ref = sidePageService.openSidePage(
  'rtl-demo',
  YourComponent,
  &#123;
    position: 'end', // Automatically adapts to RTL/LTR
    width: '500px'
  &#125;
);</code></pre>
      </div>

      <div class="rtl-content">
        <h4>Ù…Ø­ØªÙˆÙ‰ Ø¹Ø±Ø¨ÙŠ (Arabic Content)</h4>
        <p>Ù‡Ø°Ø§ Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù†Øµ Ø§Ù„Ø¹Ø±Ø¨ÙŠ ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©. ÙŠØªÙ… Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù†Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø±.</p>
        
        <h4>ÙØ§Ø±Ø³ÛŒ (Persian Content)</h4>
        <p>Ø§ÛŒÙ† Ù†Ù…ÙˆÙ†Ù‡â€ŒØ§ÛŒ Ø§Ø² Ù…ØªÙ† ÙØ§Ø±Ø³ÛŒ Ø¯Ø± Ù¾Ø§Ù†Ù„ Ú©Ù†Ø§Ø±ÛŒ Ø§Ø³Øª. Ù…ØªÙ† Ø¨Ù‡ Ø·ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø² Ø±Ø§Ø³Øª Ø¨Ù‡ Ú†Ù¾ ØªØ±Ø§Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
      </div>

      <div class="demo-actions">
        <button class="btn" (click)="closeWithResult('RTL demo completed')">
          Ø¨Ø³ØªÙ† Ù¾Ù†Ù„ (Close Panel)
        </button>
      </div>
    </div>

    <!-- Z-Index Test Demo -->
    <div *ngIf="data.type === 'zindex'" class="demo-section zindex-demo">
      <div class="zindex-info">
        <h3>ğŸ” Z-Index Testing</h3>
        <p>This side page demonstrates custom z-index control. Current z-index: <strong>1200</strong></p>
      </div>

      <div class="zindex-features">
        <h4>Z-Index Features:</h4>
        <ul>
          <li>âœ… Custom z-index per side page</li>
          <li>âœ… Automatic overlay z-index management</li>
          <li>âœ… Multiple layered side pages</li>
          <li>âœ… Proper stacking order</li>
        </ul>
      </div>

      <div class="zindex-test">
        <h4>Test Higher Z-Index Layer:</h4>
        <p>Click the button below to open another side page with z-index: 1500</p>
        <button class="btn zindex-btn" (click)="openHigherLayer()">
          Open Higher Layer (z-index: 1500)
        </button>
      </div>

      <div class="code-example">
        <h4>Code Example:</h4>
        <pre><code>// Lower z-index side page
const ref1 = sidePageService.openSidePage('layer1', Component, &#123;
  zIndex: 1200,
  width: '400px'
&#125;);

// Higher z-index side page (appears on top)
const ref2 = sidePageService.openSidePage('layer2', Component, &#123;
  zIndex: 1500,
  width: '350px',
  position: 'start'
&#125;);</code></pre>
      </div>
    </div>

    <!-- Higher Z-Index Demo -->
    <div *ngIf="data.type === 'zindex-high'" class="demo-section zindex-demo">
      <div class="zindex-info high-layer">
        <h3>â¬†ï¸ Higher Z-Index Layer</h3>
        <p>This side page has z-index: <strong>1500</strong> and appears above the previous one.</p>
      </div>

      <div class="layer-info">
        <h4>Layer Stacking:</h4>
        <div class="stack-visualization">
          <div class="stack-item active">Layer 2 (z-index: 1500) â† You are here</div>
          <div class="stack-item">Layer 1 (z-index: 1200)</div>
          <div class="stack-item">Overlay (z-index: 1199)</div>
        </div>
      </div>

      <div class="demo-actions">
        <button class="btn" (click)="closeWithResult('Higher z-index demo completed')">
          Close This Layer
        </button>
      </div>
    </div>

    <!-- Disable Close Demo -->
    <div *ngIf="data.type === 'disable-close'" class="demo-section disable-close-demo">
      <div class="warning-banner">
        <h3>âš ï¸ Close Protection Enabled</h3>
        <p>This side page has <code>disableClose: true</code> set, which means:</p>
        <ul>
          <li>âŒ Clicking outside (backdrop) will NOT close this panel</li>
          <li>âŒ Pressing ESC key will NOT close this panel</li>
          <li>âœ… You must use the close button or programmatic close methods</li>
        </ul>
      </div>

      <div class="demo-content">
        <h4>Configuration:</h4>
        <div class="code-example">
          <pre><code>const ref = sidePageService.openSidePage(
  'disable-close-demo',
  YourComponent,
  &#123;
    disableClose: true, // Prevents backdrop/ESC close
    width: '400px',
    data: &#123;
      title: 'Protected Side Page',
      type: 'disable-close'
    &#125;
  &#125;
);</code></pre>
        </div>

        <div class="test-instructions">
          <h4>ğŸ§ª Test it out:</h4>
          <ol>
            <li>Try clicking outside this panel (on the dark backdrop)</li>
            <li>Try pressing the ESC key</li>
            <li>Notice that the panel stays open</li>
            <li>Use the button below to close it properly</li>
          </ol>
        </div>

        <div class="use-cases">
          <h4>ğŸ’¡ Use Cases:</h4>
          <ul>
            <li><strong>Forms with unsaved changes:</strong> Prevent accidental data loss</li>
            <li><strong>Critical confirmations:</strong> Force user to make a deliberate choice</li>
            <li><strong>Wizard steps:</strong> Ensure users complete all required steps</li>
            <li><strong>Payment flows:</strong> Prevent interruption during sensitive operations</li>
          </ul>
        </div>
      </div>

      <div class="demo-actions">
        <button class="btn primary" (click)="closeWithResult('Disable close demo completed')">
          âœ… Close Side Page (Only way to close)
        </button>
      </div>
    </div>

    <!-- Interactive Playground -->
    <div *ngIf="data.type === 'playground'" class="demo-section playground-demo">
      <div class="playground-header">
        <h3>ğŸ® Interactive Playground</h3>
        <p>Configure all options below and see the changes in real-time!</p>
      </div>

      <form [formGroup]="playgroundForm" class="playground-form">
        <!-- Position -->
        <div class="form-group">
          <label>Position</label>
          <select formControlName="position" class="form-control">
            <option value="end">End (Right in LTR, Left in RTL) (default)</option>
            <option value="start">Start (Left in LTR, Right in RTL)</option>
          </select>
        </div>

        <!-- Width -->
        <div class="form-group">
          <label>Width</label>
          <select formControlName="width" class="form-control">
            <option value="300px">300px</option>
            <option value="400px">400px (default)</option>
            <option value="500px">500px</option>
            <option value="600px">600px</option>
            <option value="50%">50%</option>
            <option value="70%">70%</option>
            <option value="100%">100%</option>
          </select>
        </div>

        <!-- Min Width -->
        <div class="form-group">
          <label>Min Width</label>
          <select formControlName="minWidth" class="form-control">
            <option value="200px">200px</option>
            <option value="250px">250px (default)</option>
            <option value="300px">300px</option>
            <option value="350px">350px</option>
          </select>
        </div>

        <!-- Max Width -->
        <div class="form-group">
          <label>Max Width</label>
          <select formControlName="maxWidth" class="form-control">
            <option value="400px">400px</option>
            <option value="500px">500px (default)</option>
            <option value="600px">600px</option>
            <option value="800px">800px</option>
            <option value="90%">90%</option>
            <option value="95%">95%</option>
          </select>
        </div>

        <!-- Z-Index -->
        <div class="form-group">
          <label>Z-Index</label>
          <select formControlName="zIndex" class="form-control">
            <option value="1000">1000 (default)</option>
            <option value="1100">1100</option>
            <option value="1200">1200</option>
            <option value="1500">1500</option>
            <option value="2000">2000</option>
          </select>
        </div>

        <!-- Boolean Options -->
        <div class="form-group checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" formControlName="disableClose">
            <span class="checkmark"></span>
            Disable Close (prevent backdrop/ESC close)
          </label>
        </div>

        <div class="form-group checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" formControlName="showCloseBtn">
            <span class="checkmark"></span>
            Show Close Button (default: true)
          </label>
        </div>

        <div class="form-group checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" formControlName="hasBackdrop">
            <span class="checkmark"></span>
            Has Backdrop (default: true)
          </label>
        </div>

        <!-- Sample Data -->
        <div class="form-group">
          <label>Sample Data Type</label>
          <select formControlName="dataType" class="form-control">
            <option value="simple">Simple Text (default)</option>
            <option value="complex">Complex Object</option>
            <option value="list">List of Items</option>
            <option value="form">Form Data</option>
          </select>
        </div>
      </form>

      <div class="playground-actions">
        <button class="btn primary large" (click)="openWithCurrentConfig()">
          ğŸš€ Open Side Page with These Settings
        </button>
        <button class="btn secondary" (click)="resetPlayground()">
          ğŸ”„ Reset to Defaults
        </button>
      </div>

      <div class="current-config">
        <h4>Current Configuration:</h4>
        <pre class="config-preview">{{ getCurrentConfig() | json }}</pre>
      </div>

      <div class="playground-tips">
        <h4>ğŸ’¡ Tips:</h4>
        <ul>
          <li>Try different <strong>positions</strong> and toggle RTL direction to see how it adapts</li>
          <li>Use <strong>disableClose</strong> for critical forms or processes</li>
          <li>Adjust <strong>z-index</strong> when working with multiple overlays</li>
          <li>Set appropriate <strong>min/max widths</strong> for responsive designs</li>
          <li>Toggle <strong>backdrop</strong> for different visual effects</li>
        </ul>
      </div>
    </div>

    <!-- Playground Test Result -->
    <div *ngIf="data.type === 'playground-test'" class="demo-section playground-result">
      <div class="result-header">
        <h3>ğŸ¯ Playground Test Result</h3>
        <p>This side page was created with your custom configuration!</p>
      </div>

      <div class="config-display">
        <h4>Applied Configuration:</h4>
        <div class="config-grid">
          <div class="config-item">
            <strong>Position:</strong> {{ main_data.options.position || 'end' }}
          </div>
          <div class="config-item">
            <strong>Width:</strong> {{ main_data.options.width || '400px' }}
          </div>
          <div class="config-item">
            <strong>Min Width:</strong> {{ main_data.options.minWidth || '250px' }}
          </div>
          <div class="config-item">
            <strong>Max Width:</strong> {{ main_data.options.maxWidth || '500px' }}
          </div>
          <div class="config-item">
            <strong>Z-Index:</strong> {{ main_data.options.zIndex || 1000 }}
          </div>
          <div class="config-item">
            <strong>Disable Close:</strong> {{ main_data.options.disableClose ? 'Yes' : 'No' }}
          </div>
          <div class="config-item">
            <strong>Show Close Button:</strong> {{ main_data.options.showCloseBtn ? 'Yes' : 'No' }}
          </div>
          <div class="config-item">
            <strong>Has Backdrop:</strong> {{ main_data.options.hasBackdrop ? 'Yes' : 'No' }}
          </div>
        </div>
      </div>

      <div class="data-display">
        <h4>Sample Data:</h4>
        <pre class="data-preview">{{ data | json }}</pre>
      </div>

      <div class="test-actions">
        <button class="btn success" (click)="closeWithResult('Playground test completed successfully')">
          âœ… Test Successful - Close
        </button>
        <button class="btn warning" (click)="closeWithResult('Playground test failed')">
          âŒ Test Failed - Close
        </button>
        <button class="btn info" (click)="closeWithResult({ status: 'partial', notes: 'Some issues found' })">
          âš ï¸ Partial Success - Close with Data
        </button>
      </div>
    </div>
  </div>
</div>
